# reference-matpower

- [RTS-GMLC matpower data (with dcline removed)](./RTS_GMLC.m)

### Setup

- Run MATPOWER

  ```bash
  matlab -nodisplay -nosplash -nodesktop -r "filename='RTS_GMLC/RTS_GMLC.m';script"
  ```

  ```matlab

                                                                               < M A T L A B (R) >
                                                                     Copyright 1984-2020 The MathWorks, Inc.
                                                                R2020b Update 1 (9.9.0.1495850) 64-bit (glnxa64)
                                                                               September 30, 2020


  To get started, type doc.
  For product information, visit www.mathworks.com.


  MATPOWER Version 8.0-dev1, 27-Oct-2021 -- AC Power Flow (Newton)

  Newton's method power flow (power balance, polar) converged in 1 iterations.

  Converged in 0.31 seconds
  ================================================================================
  |     System Summary                                                           |
  ================================================================================

  How many?                How much?              P (MW)            Q (MVAr)
  ---------------------    -------------------  -------------  -----------------
  Buses             73     Total Gen Capacity   14549.8       -1615.0 to 4406.0
  Generators       158     On-line Capacity      9076.0       -1615.0 to 4406.0
  Committed Gens    96     Generation (actual)   8704.0            1718.7
  Loads             51     Load                  8550.0            1740.0
    Fixed           51       Fixed               8550.0            1740.0
    Dispatchable     0       Dispatchable          -0.0 of -0.0      -0.0
  Shunts             3     Shunt (inj)             -0.0            -316.1
  Branches         120     Losses (I^2 * Z)       153.97           1442.60
  Transformers      15     Branch Charging (inj)     -             1780.0
  Inter-ties         5     Total Inter-tie Flow   331.2              25.0
  Areas              3

                            Minimum                      Maximum
                   -------------------------  --------------------------------
  Voltage Magnitude   0.951 p.u. @ bus 308        1.050 p.u. @ bus 214
  Voltage Angle     -30.66 deg   @ bus 307       16.52 deg   @ bus 122
  P Losses (I^2*R)             -                  9.42 MW    @ line 312-323
  Q Losses (I^2*X)             -                 76.11 MVAr  @ line 312-323

  ================================================================================
  |     Bus Data                                                                 |
  ================================================================================
   Bus      Voltage          Generation             Load
    #   Mag(pu) Ang(deg)   P (MW)   Q (MVAr)   P (MW)   Q (MVAr)
  ----- ------- --------  --------  --------  --------  --------
    101  1.047   -8.575    168.00     10.68    108.00     22.00
    102  1.047   -8.634    168.00      4.66     97.00     20.00
    103  1.011   -7.980       -         -      180.00     37.00
    104  1.017  -10.745       -         -       74.00     15.00
    105  1.035  -10.928       -         -       71.00     14.00
    106  1.032  -13.157       -         -      136.00     28.00
    107  1.050   -3.989    355.00     49.51    125.00     25.00
    108  1.017   -9.342       -         -      171.00     35.00
    109  1.027   -8.460       -         -      175.00     36.00
    110  1.050  -10.203       -         -      195.00     40.00
    111  1.027   -4.083       -         -         -         -
    112  1.020   -2.396       -         -         -         -
    113  1.035    0.000*   220.00     76.07    265.00     54.00
    114  1.044   -2.552      0.00    103.20    194.00     39.00
    115  1.043    5.977    165.00     92.20    317.00     64.00
    116  1.046    5.824    155.00     79.87    100.00     20.00
    117  1.048    9.138       -         -         -         -
    118  1.050    9.952    355.00     68.45    333.00     68.00
    119  1.040    5.368       -         -      181.00     37.00
    120  1.044    6.847       -         -      128.00     26.00
    121  1.050   10.564    400.00    -21.93       -         -
    122  1.050   16.516    300.00    -40.76       -         -
    123  1.050    8.378    670.00     25.07       -         -
    124  1.013    0.844       -         -         -         -
    201  1.050  -12.611    142.00     21.73    108.00     22.00
    202  1.050  -12.651    168.00     14.28     97.00     20.00
    203  1.019   -9.121       -         -      180.00     37.00
    204  1.015  -14.429       -         -       74.00     15.00
    205  1.033  -14.929       -         -       71.00     14.00
    206  1.028  -17.155       -         -      136.00     28.00
    207  0.970  -22.392    110.00     38.00    125.00     25.00
    208  0.964  -21.696       -         -      171.00     35.00
    209  1.020  -11.846       -         -      175.00     36.00
    210  1.043  -14.163       -         -      195.00     40.00
    211  1.028   -5.950       -         -         -         -
    212  1.018   -4.164       -         -         -         -
    213  1.050   -0.390    465.00    154.25    265.00     54.00
    214  1.050   -4.128      0.00    125.29    194.00     39.00
    215  1.044    4.742    260.00     86.30    317.00     64.00
    216  1.047    4.679    155.00     79.81    100.00     20.00
    217  1.049    8.086       -         -         -         -
    218  1.050    8.906    355.00     60.31    333.00     68.00
    219  1.040    4.449       -         -      181.00     37.00
    220  1.044    6.123       -         -      128.00     26.00
    221  1.050    9.516    296.97     -7.62       -         -
    222  1.050   15.467    300.00    -41.84       -         -
    223  1.050    7.762    726.00      0.68       -         -
    224  1.017   -0.386       -         -         -         -
    301  1.050  -23.504    104.00     48.97    108.00     22.00
    302  1.050  -23.570    126.00     34.30     97.00     20.00
    303  0.998  -17.733       -         -      180.00     37.00
    304  1.007  -23.757       -         -       74.00     15.00
    305  1.028  -24.498       -         -       71.00     14.00
    306  1.020  -26.020       -         -      136.00     28.00
    307  0.957  -30.662    110.00     37.98    125.00     25.00
    308  0.951  -29.947       -         -      171.00     35.00
    309  1.007  -19.748       -         -      175.00     36.00
    310  1.032  -22.314       -         -      195.00     40.00
    311  1.018  -12.834       -         -         -         -
    312  1.003  -11.045       -         -         -         -
    313  1.035   -7.624    355.00    149.98    265.00     54.00
    314  1.050   -9.655      0.00    166.72    194.00     39.00
    315  1.042    1.503    190.00    128.78    317.00     64.00
    316  1.045    1.163    155.00     79.13    100.00     20.00
    317  1.047    5.119       -         -         -         -
    318  1.050    6.217    355.00     63.24    333.00     68.00
    319  1.039    0.850       -         -      181.00     37.00
    320  1.044    2.456       -         -      128.00     26.00
    321  1.050    6.905    355.00     -3.52       -         -
    322  1.050   12.932    310.00    -39.97       -         -
    323  1.050    4.057    710.00     74.93       -         -
    324  0.999   -5.501       -         -         -         -
    325  1.049    4.598       -         -         -         -
                          --------  --------  --------  --------
                 Total:   8703.97   1718.74   8550.00   1740.00

  ================================================================================
  |     Branch Data                                                              |
  ================================================================================
  Brnch   From   To    From Bus Injection   To Bus Injection     Loss (I^2 * Z)
    #     Bus    Bus    P (MW)   Q (MVAr)   P (MW)   Q (MVAr)   P (MW)   Q (MVAr)
  -----  -----  -----  --------  --------  --------  --------  --------  --------
     1    101    102      7.84    -26.19     -7.84    -24.32     0.002      0.01
     2    101    103     -0.58     14.65      0.73    -20.08     0.159      0.61
     3    101    105     52.74      0.21    -52.18     -0.55     0.559      2.16
     4    102    104     34.94     13.72    -34.50    -15.64     0.441      1.70
     5    102    106     43.90     -4.74    -43.02      2.51     0.881      3.38
     6    103    109      3.68    -15.56     -3.61     12.48     0.063      0.24
     7    103    124   -184.41     -1.36    185.10     30.14     0.685     28.78
     8    104    109    -39.50      0.64     39.91     -2.00     0.408      1.57
     9    105    110    -18.82    -13.45     18.93     11.25     0.108      0.41
    10    106    110    -92.98   -137.09     94.12   -124.54     1.140      4.97
    11    107    108    168.71     19.74   -164.51     -5.57     4.193     15.98
    12    107    203     61.29      4.77    -59.84     -3.91     1.451      5.56
    13    108    109    -10.60     -5.60     10.65      1.10     0.051      0.20
    14    108    110      4.11    -23.83     -3.91     19.79     0.199      0.77
    15    109    111    -93.72    -30.19     93.91     38.39     0.195      8.20
    16    109    112   -128.23    -17.38    128.57     31.54     0.337     14.16
    17    110    111   -134.37     19.56    134.71     -5.09     0.345     14.47
    18    110    112   -169.77     33.94    170.33    -10.41     0.560     23.53
    19    111    113   -156.55      3.54    157.95     -2.98     1.398     11.19
    20    111    114    -72.08    -36.85     72.37     29.89     0.295      2.48
    21    112    113    -94.16    -23.47     94.69     17.16     0.531      4.25
    22    112    123   -204.74      2.33    209.60     15.18     4.857     39.26
    23    113    123   -179.70      8.11    183.05     -1.38     3.351     26.50
    24    113    215   -117.94     -0.22    119.25     -7.05     1.306      9.79
    25    114    116   -266.37     34.31    269.69     -4.05     3.323     39.22
    26    115    116     14.59    -23.89    -14.58     20.08     0.013      0.11
    27    115    121   -177.03      7.91    178.77     -4.98     1.739     14.20
    28    115    121   -177.03      7.91    178.77     -4.98     1.739     14.20
    29    115    124    187.47     36.27   -185.10    -30.14     2.377     17.66
    30    116    117   -240.85     22.84    242.46    -14.93     1.609     13.94
    31    116    119     40.73     21.01    -40.67    -25.87     0.061      0.47
    32    117    118   -111.10      2.55    111.33     -4.27     0.225      1.57
    33    117    122   -131.35     12.39    133.63    -19.65     2.275     17.06
    34    118    121    -44.66      2.36     44.72     -7.95     0.055      0.48
    35    118    121    -44.66      2.36     44.72     -7.95     0.055      0.48
    36    119    120    -70.16     -5.56     70.39     -1.62     0.228      1.82
    37    119    120    -70.16     -5.56     70.39     -1.62     0.228      1.82
    38    120    123   -134.39    -11.38    134.89     10.00     0.499      3.66
    39    120    123   -134.39    -11.38    134.89     10.00     0.499      3.66
    40    121    122   -164.10     22.63    166.37    -21.11     2.274     17.18
    41    123    217      7.57     -8.73     -7.57     -8.31     0.005      0.04
    42    201    202      5.24    -26.53     -5.23    -24.29     0.001      0.00
    43    201    203    -24.84     19.93     25.42    -23.83     0.573      2.20
    44    201    205     53.61      6.34    -53.02     -6.57     0.585      2.26
    45    202    204     31.49     19.07    -31.06    -21.04     0.428      1.65
    46    202    206     44.74     -0.50    -43.83     -1.62     0.911      3.50
    47    203    209     38.80    -12.07    -38.31     10.60     0.482      1.85
    48    203    224   -184.37      2.82    185.04     25.55     0.675     28.36
    49    204    209    -42.94      6.04     43.44     -7.03     0.498      1.92
    50    205    210    -17.98     -7.43     18.06      5.14     0.078      0.30
    51    206    210    -92.17   -131.96     93.29   -126.64     1.127      4.91
    52    207    208    -15.00     13.00     15.07    -14.32     0.071      0.27
    53    208    209   -101.32      0.22    106.08     13.59     4.755     18.25
    54    208    210    -84.75    -20.90     88.24     29.75     3.489     13.39
    55    209    211   -125.38    -35.41    125.73     49.95     0.346     14.54
    56    209    212   -160.82    -17.75    161.35     40.17     0.534     22.42
    57    210    211   -179.30     15.98    179.91      9.81     0.614     25.79
    58    210    212   -215.29     35.77    216.19      2.14     0.902     37.90
    59    211    213   -218.99    -13.71    221.72     24.71     2.725     21.80
    60    211    214    -86.64    -46.05     87.08     40.21     0.436      3.66
    61    212    213   -152.09    -49.66    153.55     50.60     1.454     11.64
    62    212    223   -225.45      7.35    231.38     18.84     5.925     47.89
    63    213    223   -175.27     24.93    178.46    -19.79     3.187     25.21
    64    214    216   -281.08     46.08    284.78    -11.45     3.699     43.65
    65    215    216      4.47    -24.58     -4.46     20.73     0.010      0.08
    66    215    221   -184.05     11.27    185.93     -7.19     1.882     15.37
    67    215    221   -184.05     11.27    185.93     -7.19     1.882     15.37
    68    215    224    187.39     31.41   -185.04    -25.55     2.346     17.43
    69    216    217   -248.08     24.53    249.78    -15.81     1.704     14.77
    70    216    219     22.76     25.99    -22.72    -31.05     0.037      0.28
    71    217    218   -110.83     10.66    111.05    -12.38     0.226      1.58
    72    217    222   -131.39     13.47    133.67    -20.73     2.278     17.09
    73    218    221    -44.53      2.35     44.58     -7.94     0.055      0.47
    74    218    221    -44.53      2.35     44.58     -7.94     0.055      0.47
    75    219    220    -79.14     -2.97     79.43     -3.73     0.289      2.32
    76    219    220    -79.14     -2.97     79.43     -3.73     0.289      2.32
    77    220    223   -143.43     -9.27    144.00      8.39     0.567      4.16
    78    220    223   -143.43     -9.27    144.00      8.39     0.567      4.16
    79    221    222   -164.06     22.62    166.33    -21.11     2.273     17.17
    80    301    302      8.64    -27.26     -8.64    -23.56     0.002      0.01
    81    301    303    -39.86     35.56     41.40    -35.63     1.540      5.91
    82    301    305     27.21     18.68    -26.99    -20.28     0.227      0.88
    83    302    304     11.14     30.50    -10.79    -32.75     0.351      1.35
    84    302    306     26.50      7.36    -26.14    -11.52     0.366      1.41
    85    303    309     26.14    -15.26    -25.87     13.08     0.271      1.04
    86    303    324   -247.53     13.89    248.80     39.49     1.271     53.39
    87    304    309    -63.21     17.75     64.37    -16.11     1.161      4.47
    88    305    310    -44.01      6.28     44.45     -7.17     0.434      1.66
    89    306    310   -109.86   -120.44    111.49   -131.32     1.633      7.11
    90    307    308    -15.00     12.98     15.07    -14.25     0.072      0.28
    91    308    309   -101.87      1.21    106.82     13.44     4.943     18.97
    92    308    310    -84.20    -21.96     87.76     31.20     3.563     13.67
    93    309    311   -143.49    -35.07    143.94     54.24     0.457     19.18
    94    309    312   -176.84    -11.35    177.49     38.94     0.657     27.60
    95    310    311   -202.57     20.54    203.38     13.12     0.801     33.66
    96    310    312   -236.13     46.75    237.25      0.29     1.120     47.04
    97    311    313   -199.55     -7.00    201.85     14.90     2.305     18.44
    98    311    314   -147.77    -60.36    148.97     61.06     1.204     10.11
    99    312    313   -134.86    -52.09    136.08     51.45     1.218      9.74
   100    312    323   -279.89     12.86    289.30     41.86     9.416     76.11
   101    313    323   -247.93     29.63    254.40      1.78     6.471     51.18
   102    314    316   -342.97     66.67    348.54    -10.00     5.565     65.66
   103    315    316     35.64    -22.59    -35.61     18.93     0.031      0.27
   104    315    321   -207.93     13.19    210.34     -4.80     2.408     19.66
   105    315    321   -207.93     13.19    210.34     -4.80     2.408     19.66
   106    315    324    253.23     60.97   -248.80    -39.49     4.421     32.84
   107    316    317   -286.68     29.76    288.97    -15.95     2.288     19.83
   108    316    319     28.75     20.44    -28.72    -25.47     0.037      0.29
   109    317    318   -150.00      2.34    150.42     -2.77     0.410      2.87
   110    317    322   -138.97     13.61    141.51    -18.80     2.549     19.11
   111    318    321    -50.17      3.06     50.24     -8.52     0.069      0.60
   112    318    321    -50.17      3.06     50.24     -8.52     0.069      0.60
   113    319    320    -76.14     -5.76     76.41     -1.09     0.269      2.15
   114    319    320    -76.14     -5.76     76.41     -1.09     0.269      2.15
   115    320    323   -140.41    -11.91    140.96     10.87     0.546      4.00
   116    320    323   -140.41    -11.91    140.96     10.87     0.546      4.00
   117    321    322   -166.15     23.13    168.49    -21.16     2.332     17.62
   118    325    121   -115.62      8.45    117.11    -18.69     1.499     12.12
   119    318    223    -28.08     -8.12     28.18    -15.15     0.095      0.76
   120    323    325   -115.62      9.54    115.62     -8.45     0.000      1.10
                                                               --------  --------
                                                      Total:   153.965   1442.60
  Elapsed time is 1.041196 seconds.
  ```

And the PEGASE case:

```matlab
matlab -nodisplay -nosplash -nodesktop -r "filename='case9241pegase/case9241pegase.m';script"
.
.
.
Elapsed time is 2.927973 seconds.
```

*Note: The "Elapsed Time" includes `loadcase`, `runpf`, and `savecase`.*


- Install [Julia](https://julialang.org/downloads/)
- Run the following in a terminal:

  ```bash
  git clone https://github.com/G-PST/power-flow-exercise
  cd reference-matpower
  julia --project -e "using Pkg; Pkg.instantiate()"
  julia --project parse-matpower-results.jl 'RTS_GMLC/results/RTS_GMLC.mat'
  ```

  The output is generated in the results folder:

  ```bash
  tree results
  ```

  ```
  results
  ├── bus.csv
  └── flow.csv
  ```

  ```bash
  head results/bus.csv
  ```

  ```
  bus_n,v_mag,v_ang,p_load,q_load,p_gen,q_gen
  101.0,1.0468000000000002,-8.575015383184262,108.0,22.0,168.0,10.677513207612424
  102.0,1.0467,-8.633843977493477,97.0,20.0,168.0,4.6590123323421455
  103.0,1.011336415887653,-7.980239232397326,180.0,37.0,0.0,0.0
  104.0,1.0174699497169186,-10.744881948471278,74.0,15.0,0.0,0.0
  105.0,1.0353916382243729,-10.928291745909693,71.0,14.0,,
  106.0,1.0324203062223822,-13.15740349258403,136.0,28.0,,
  107.0,1.05,-3.9889120653590244,125.0,25.0,355.0,49.505761113045935
  108.0,1.016715104216173,-9.342435452926118,171.0,35.0,,
  109.0,1.026628375155244,-8.459834837803646,175.0,36.0,,
  ```

  ```bash
  head results/flow.csv
  ```

  ```
  from_bus_index,to_bus_index,from_bus_inj_p,from_bus_inj_q,to_bus_inj_p,to_bus_inj_q,branch_n,loss_p,loss_q
  101.0,102.0,7.836947725444657,-26.185471349366868,-7.835242708863907,-24.317676453090378,1,0.0015573966367567534,0.007267850971531516
  101.0,103.0,-0.5760549573418878,14.648159473053967,0.7347352484487594,-20.07739019483038,2,0.15794909523001147,0.605950165336953
  101.0,105.0,52.73910723189744,0.21482508392366428,-52.180250655495506,-0.5486064904605042,3,0.5185637333334714,2.0035416969702307
  102.0,104.0,34.93848088783804,13.718759655974702,-34.49766816580356,-15.644702754786586,4,0.4239359008473257,1.631510891139708
  102.0,106.0,43.89676182102464,-4.742070870543278,-43.01571721374189,2.5054534578882945,5,0.8176469910928629,3.1397644457965934
  103.0,109.0,3.676101076540224,-15.559619474744576,-3.6132502438149126,12.478058107721965,6,0.06230128001773544,0.2391565265196941
  103.0,124.0,-184.410836324989,-1.3629903304254343,185.0959574960243,30.13807951390718,7,0.6621836008721264,27.81171123662931
  104.0,109.0,-39.50233183419637,0.6447027547864457,39.91044890491381,-1.9975915471223153,8,0.3915920099305499,1.5083544086213772
  105.0,110.0,-18.81974934450436,-13.451393509539123,18.92748722226619,11.254176060314547,9,0.10385471094069719,0.39735715490353707
  ```
